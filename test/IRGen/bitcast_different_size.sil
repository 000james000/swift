// RUN: %swift -target x86_64-apple-macosx10.9 -emit-ir %s -verify | FileCheck %s
// XFAIL: linux

sil_stage canonical

import Swift

// CHECK-LABEL: define i64 @bitcast_different_size1

sil @bitcast_different_size1 : $@thin (Int32) -> Int64 {
entry(%i : $Int32):
  // CHECK: ret {{.*}}undef
  // CHECK: call {{.*}}trap
  %o = unchecked_trivial_bit_cast %i : $Int32 to $Int64
  return %o : $Int64
}

// CHECK-LABEL: define i64 @bitcast_different_size2

sil @bitcast_different_size2 : $@thin (Int32) -> Int64 {
entry(%i : $Int32):
  // CHECK: ret {{.*}}undef
  // CHECK: call {{.*}}trap
  %p = unchecked_ref_bit_cast %i : $Int32 to $Int64
  return %p : $Int64
}
