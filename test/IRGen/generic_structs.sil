// RUN: %swift -triple x86_64-apple-darwin10 %s -emit-llvm -enable-dynamic-value-type-layout | FileCheck %s

import Builtin

// CHECK: @_TWVV15generic_structs13SingleDynamic = constant [16 x i8*] [
// CHECK: i8* null, i8* null, i8* null]

// CHECK: define linkonce_odr hidden void @_TwXXV15generic_structs13SingleDynamic([24 x i8]* %buffer, %swift.type* %Self) {
// CHECK:   [[SELF_ARRAY:%.*]] = bitcast %swift.type* %Self to %swift.type**
// CHECK:   [[SELF_T_ADDR:%.*]] = getelementptr inbounds %swift.type** [[SELF_ARRAY]], i64 3
// CHECK:   %T = load %swift.type** [[SELF_T_ADDR]], align 8

struct SingleDynamic<T> {
  var x : T
}

sil @top_level_code : $() -> () {
entry:
  %0 = tuple ()
  return %0 : $()
}

