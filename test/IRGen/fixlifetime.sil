// RUN: %swift -target x86_64-apple-macosx10.9 -parse-sil -emit-ir %s | FileCheck %s

// CHECK-LABEL: define void @test(%C11fixlifetime1C*, %objc_object*, i8**, i8*, %swift.refcounted*, %C11fixlifetime1C*, %objc_object*, i8**, i8*, %swift.refcounted*) {
// CHECK: entry:
// CHECK-NEXT:  call void bitcast (void (%swift.refcounted*)* @swift_fixLifetime2 to void (%C11fixlifetime1C*)*)(%C11fixlifetime1C*
// CHECK-NEXT:  call void bitcast (void (%swift.refcounted*)* @swift_fixLifetime2 to void (%objc_object*)*)(%objc_object*
// CHECK-NEXT:  call void @swift_fixLifetime2(%swift.refcounted*
// CHECK-NEXT:  call void bitcast (void (%swift.refcounted*)* @swift_fixLifetime2 to void (%C11fixlifetime1C*)*)(%C11fixlifetime1C*
// CHECK-NEXT:  call void bitcast (void (%swift.refcounted*)* @swift_fixLifetime2 to void (%objc_object*)*)(%objc_object*
// CHECK-NEXT:  call void @swift_fixLifetime2(%swift.refcounted*

class C {}
protocol P : class {}
typealias F = () -> ()
struct Agg {
  var c : C
  var p : P
  var f : F
}

sil @test : $@thin (C, P, @callee_owned () -> (), Agg) -> () {
bb0(%0 : $C, %1 : $P, %2 : $@callee_owned () -> (), %3 : $Agg):
  fix_lifetime %0 : $C
  fix_lifetime %1 : $P
  fix_lifetime %2 : $@callee_owned () -> ()
  fix_lifetime %3 : $Agg
  %4 = tuple()
  return %4 : $()
}