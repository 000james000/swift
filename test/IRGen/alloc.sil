// RUN: %target-build-swift %s -emit-ir -o - | FileCheck %s

import Builtin

struct Pair<T> {
  var fst: T, snd: T
}

struct Huge {
  var pairs: Pair<Pair<Pair<Pair<Pair<Pair<Pair<Pair<Pair<Builtin.Int64>>>>>>>>>
  var unalign: Builtin.Int8
}

// CHECK:    define linkonce_odr hidden void @_TwdeV4main4Huge(
// CHECK:      [[T0:%.*]] = bitcast [[BUFFER:.[0-9]+ x i8.]]* {{%.*}} to i8**
// CHECK-NEXT: [[T1:%.*]] = load i8** [[T0]]
// CHECK-NEXT: call void @swift_slowDealloc(i8* [[T1]], i64 4097, i64 7)
// CHECK-NEXT: ret void

// CHECK:    define linkonce_odr hidden [[OPAQUE:%swift.opaque]]* @_TwalV4main4Huge(
// CHECK:      [[T0:%.*]] = call noalias i8* @swift_slowAlloc(i64 4097, i64 7, i64 2)
// CHECK-NEXT: [[T1:%.*]] = bitcast [[BUFFER]]* {{%.*}} to i8**
// CHECK-NEXT: store i8* [[T0]], i8** [[T1]]
