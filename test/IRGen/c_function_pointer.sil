// RUN: %swift -emit-ir -target x86_64-apple-macosx10.9 %s | FileCheck %s
// XFAIL: linux

import Swift

// CHECK-LABEL: define void @c_function_pointer(void ()*)
sil @c_function_pointer : $@thin @cc(cdecl) (CFunctionPointer<() -> ()>) -> () {
entry(%f : $CFunctionPointer<() -> ()>):
  return undef : $()
}

// CHECK-LABEL: define void @call_with_c_function_pointer(i8*)
sil @call_with_c_function_pointer : $@thin (CFunctionPointer<() -> ()>) -> () {
entry(%f : $CFunctionPointer<() -> ()>):
  %c = function_ref @c_function_pointer : $@thin @cc(cdecl) (CFunctionPointer<() -> ()>) -> ()
  %z = apply %c(%f) : $@thin @cc(cdecl) (CFunctionPointer<() -> ()>) -> ()
  return %z : $()
}
